parameters:
  name: 'multi_platform_build_test'
  jobs:
    linux:
      vmImage: 'ubuntu-latest'
    macOS:
      vmImage: 'macOS-latest'
      runLint: 'false'
    windows:
      vmImage: 'windows-latest'
      runLint: 'false'
  additionalVariables: {}

stages:
- stage: ${{ parameters.name }}
  variables:
    ${{ insert }}: ${{ parameters.additionalVariables }}
  jobs:
  - ${{ each job in parameters.jobs }}:
    - template: build-test-job.yml
      parameters:
        name: ${{ job.key }}
        additionalVariables: ${{ parameters.additionalVariables }}
        ${{ insert }}: ${{ job.value }}
